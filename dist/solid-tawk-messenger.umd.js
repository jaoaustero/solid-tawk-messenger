var Q=Object.defineProperty;var z=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var N=(l,r,d)=>r in l?Q(l,r,{enumerable:!0,configurable:!0,writable:!0,value:d}):l[r]=d,T=(l,r)=>{for(var d in r||(r={}))X.call(r,d)&&N(l,d,r[d]);if(z)for(var d of z(r))Z.call(r,d)&&N(l,d,r[d]);return l};(function(l,r){typeof exports=="object"&&typeof module!="undefined"?module.exports=r():typeof define=="function"&&define.amd?define(r):(l=typeof globalThis!="undefined"?globalThis:l||self,l["solid-tawk-messenger"]=r())})(this,function(){"use strict";const l=Symbol("solid-proxy");let r=y;const d={},p=1,A=2,U={owned:null,cleanups:null,context:null,owner:null};var w=null;let m=null,g=null,u=null,c=null,v=0;function V(t,e,n){r=J;const i=H(t,e,!1,p);i.user=!0,c&&c.push(i)}function O(t){if(g)return t();let e;const n=g=[];try{e=t()}finally{g=null}return P(()=>{for(let i=0;i<n.length;i+=1){const a=n[i];if(a.pending!==d){const o=a.pending;a.pending=d,I(a,o)}}},!1),e}function E(t){let e;return e=t(),e}function W(t){V(()=>E(t))}function D(t){return w===null||(w.cleanups===null?w.cleanups=[t]:w.cleanups.push(t)),t}function I(t,e,n){if(t.comparator&&t.comparator(t.value,e))return e;if(g)return t.pending===d&&g.push(t),t.pending=e,e;let i=!1;return t.value=e,t.observers&&t.observers.length&&P(()=>{for(let a=0;a<t.observers.length;a+=1){const o=t.observers[a];i&&m.disposed.has(o),o.pure?u.push(o):c.push(o),o.observers&&(i&&!o.tState||!i&&!o.state)&&b(o),i||(o.state=p)}if(u.length>1e6)throw u=[],new Error},!1),e}function F(t){if(!t.fn)return;_(t);const e=w,n=v;w=t,B(t,t.value,n),w=e}function B(t,e,n){let i;try{i=t.fn(e)}catch(a){M(a)}(!t.updatedAt||t.updatedAt<=n)&&(t.observers&&t.observers.length?I(t,i):t.value=i,t.updatedAt=n)}function H(t,e,n,i=p,a){const o={fn:t,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:w,context:null,pure:n};return w===null||w!==U&&(w.owned?w.owned.push(o):w.owned=[o]),o}function h(t){const e=m;if(t.state!==p)return t.state=0;if(t.suspense&&E(t.suspense.inFallback))return t.suspense.effects.push(t);const n=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<v);)(t.state||e)&&n.push(t);for(let i=n.length-1;i>=0;i--)if(t=n[i],t.state===p||e)F(t);else if(t.state===A||e){const a=u;u=null,L(t),u=a}}function P(t,e){if(u)return t();let n=!1;e||(u=[]),c?n=!0:c=[],v++;try{t()}catch(i){M(i)}finally{G(n)}}function G(t){u&&(y(u),u=null),!t&&(c.length?O(()=>{r(c),c=null}):c=null)}function y(t){for(let e=0;e<t.length;e++)h(t[e])}function J(t){let e,n=0;for(e=0;e<t.length;e++){const a=t[e];a.user?t[n++]=a:h(a)}const i=t.length;for(e=0;e<n;e++)h(t[e]);for(e=i;e<t.length;e++)h(t[e])}function L(t){t.state=0;const e=m;for(let n=0;n<t.sources.length;n+=1){const i=t.sources[n];i.sources&&(i.state===p||e?h(i):(i.state===A||e)&&L(i))}}function b(t){const e=m;for(let n=0;n<t.observers.length;n+=1){const i=t.observers[n];(!i.state||e)&&(i.state=A,i.pure?u.push(i):c.push(i),i.observers&&b(i))}}function _(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),i=t.sourceSlots.pop(),a=n.observers;if(a&&a.length){const o=a.pop(),C=n.observerSlots.pop();i<a.length&&(o.sourceSlots[C]=i,a[i]=o,n.observerSlots[i]=C)}}if(t.owned){for(e=0;e<t.owned.length;e++)_(t.owned[e]);t.owned=null}if(t.cleanups){for(e=0;e<t.cleanups.length;e++)t.cleanups[e]();t.cleanups=null}t.state=0,t.context=null}function M(t){throw t}function k(){return!0}const Y={get(t,e,n){return e===l?n:t.get(e)},has(t,e){return t.has(e)},set:k,deleteProperty:k,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:k,deleteProperty:k}},ownKeys(t){return t.keys()}};function S(t){return typeof t=="function"?t():t}function $(...t){return new Proxy({get(e){for(let n=t.length-1;n>=0;n--){const i=S(t[n])[e];if(i!==void 0)return i}},has(e){for(let n=t.length-1;n>=0;n--)if(e in S(t[n]))return!0;return!1},keys(){const e=[];for(let n=0;n<t.length;n++)e.push(...Object.keys(S(t[n])));return[...new Set(e)]}},Y)}const x=(t,e)=>!e||e.length===0?!1:e!=null&&e.constructor===t,j=({propertyId:t,widgetId:e})=>{const n=document.createElement("script");n.async=!0,n.src=`https://tawk.to/chat/${t}/${e}`,n.charset="UTF-8",n.setAttribute("crossorigin","*");const i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i)};return t=>{const e=$({propertyId:"",widgetId:"",customStyle:{},onLoad:()=>{},onStatusChange:()=>{},onBeforeLoad:()=>{},onChatMaximized:()=>{},onChatMinimized:()=>{},onChatHidden:()=>{},onChatStarted:()=>{},onChatEnded:()=>{},onPrechatSubmit:()=>{},onOfflineSubmit:()=>{},onChatMessageVisitor:()=>{},onChatMessageAgent:()=>{},onChatMessageSystem:()=>{},onAgentJoinChat:()=>{},onAgentLeaveChat:()=>{},onChatSatisfaction:()=>{},onVisitorNameChanged:()=>{},onFileUpload:()=>{},onTagsUpdated:()=>{}},t);W(()=>{n()}),D(()=>{delete window.Tawk_API,delete window.Tawk_LoadStart});const n=()=>{if(!x(String,e.propertyId)){console.error("[Tawk-messenger-solid warn]: You didn't specified 'propertyId' property in the plugin.");return}if(!x(String,e.widgetId)){console.error("[Tawk-messenger-solid warn]: You didn't specified 'widgetId' property in the plugin.");return}!window||!document||i()},i=()=>{window.Tawk_API=window.Tawk_API||{},window.Tawk_LoadStart=new Date,j({propertyId:e.propertyId,widgetId:e.widgetId}),a()},a=()=>{window.addEventListener("tawkLoad",()=>{e.onLoad()}),window.addEventListener("tawkStatusChange",s=>{e.onStatusChange(s.detail)}),window.addEventListener("tawkBeforeLoad",()=>{e.onBeforeLoad()}),window.addEventListener("tawkChatMaximized",()=>{e.onChatMaximized()}),window.addEventListener("tawkChatMinimized",()=>{e.onChatMinimized()}),window.addEventListener("tawkChatHidden",()=>{e.onChatHidden()}),window.addEventListener("tawkChatStarted",()=>{e.onChatStarted()}),window.addEventListener("tawkChatEnded",()=>{e.onChatEnded()}),window.addEventListener("tawkPrechatSubmit",s=>{e.onPrechatSubmit(s.detail)}),window.addEventListener("tawkOfflineSubmit",s=>{e.onOfflineSubmit(s.detail)}),window.addEventListener("tawkChatMessageVisitor",s=>{e.onChatMessageVisitor(s.detail)}),window.addEventListener("tawkChatMessageAgent",s=>{e.onChatMessageAgent(s.detail)}),window.addEventListener("tawkChatMessageSystem",s=>{e.onChatMessageSystem(s.detail)}),window.addEventListener("tawkAgentJoinChat",s=>{e.onAgentJoinChat(s.detail)}),window.addEventListener("tawkAgentLeaveChat",s=>{e.onAgentLeaveChat(s.detail)}),window.addEventListener("tawkChatSatisfaction",s=>{e.onChatSatisfaction(s.detail)}),window.addEventListener("tawkVisitorNameChanged",s=>{e.onVisitorNameChanged(s.detail)}),window.addEventListener("tawkFileUpload",s=>{e.onFileUpload(s.detail)}),window.addEventListener("tawkTagsUpdated",s=>{e.onTagsUpdated(s.detail)})},o={maximize:()=>window.Tawk_API.maximize(),minimize:()=>window.Tawk_API.minimize(),toggle:()=>window.Tawk_API.toggle(),popup:()=>window.Tawk_API.popup(),showWidget:()=>window.Tawk_API.showWidget(),hideWidget:()=>window.Tawk_API.hideWidget(),toggleVisibility:()=>window.Tawk_API.toggleVisibility(),endChat:()=>window.Tawk_API.endChat()},C={getWindowType:()=>window.Tawk_API.getWindowType(),getStatus:()=>window.Tawk_API.getStatus(),isChatMaximized:()=>window.Tawk_API.isChatMaximized(),isChatMinimized:()=>window.Tawk_API.isChatMinimized(),isChatHidden:()=>window.Tawk_API.isChatHidden(),isChatOngoing:()=>window.Tawk_API.isChatOngoing(),isVisitorEngaged:()=>window.Tawk_API.isVisitorEngaged(),onLoaded:()=>window.Tawk_API.onLoaded},R={visitor:s=>window.Tawk_API.visitor=s,setAttributes:(s,f)=>window.Tawk_API.setAttributes(s,f),addEvent:(s,f,K)=>window.Tawk_API.addEvent(s,f,K),addTags:(s,f)=>window.Tawk_API.addTags(s,f),removeTags:(s,f)=>window.Tawk_API.removeTags(s,f)};return e.ref(T(T(T({},C),o),R)),null}});
